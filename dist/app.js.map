{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./db.js","webpack:///./src/app.js","webpack:///./src/controllers/data.js","webpack:///./src/models/data.js","webpack:///external \"body-parser\"","webpack:///external \"express\"","webpack:///external \"mongodb\""],"names":["MongoClient","require","state","db","exports","connect","url","done","err","get","express","bodyParser","app","dataController","use","req","res","next","setHeader","json","urlencoded","extended","console","log","listen","getPlaces","send","Data","min_latitude","min_longitude","max_latitude","max_longitude","city_id","limit","cursor","docs","sendStatus","ObjectID","userID","cb","collection","findOne","doc"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/app.js\");\n","const MongoClient = require('mongodb').MongoClient\n\nconst state = {\n  db: null\n}\n\nexports.connect = (url, done) => {\n  if (state.db) return state.db\n\n  MongoClient.connect(url, (err, db) => {\n    if (err) return done(err)\n\n    state.db = db\n    done()\n  })\n}\n\nexports.get = () => state.db","const express = require('express')\nconst bodyParser = require('body-parser')\nconst app = express()\n// const fileUpload = require('express-fileupload')\n\nconst db = require('../db')\n\nconst dataController = require('./controllers/data')\n\napp.use(function (req, res, next) {\n  res.setHeader('Access-Control-Allow-Origin', '*')\n  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE')\n  res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With,content-type')\n  res.setHeader('Access-Control-Allow-Credentials', true)\n  next()\n})\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: true }))\n\n// db.connect('mongodb://mongo:27017/vocapp', (err) => {\ndb.connect('mongodb://127.0.0.1:27017/vocapp', (err) => {\n  if (err) return console.log(err)\n\n  app.listen(3012, () => {\n    console.log('API app started!')\n  })\n})\n\n// app.post('/admins', adminsController.all)\n\napp.get('/places', dataController.getPlaces)\n\napp.get('/', (req, res) => {\n  res.send('What did u want to see here?')\n})","const Data = require('../models/data')\n\nexports.getPlaces = (req, res) => {\n  const {\n    min_latitude = '',\n    min_longitude = '',\n    max_latitude = '',\n    max_longitude = '',\n    city_id = '',\n    limit = '',\n    cursor = 0\n  } = req\n\n  Data.getPlaces({\n    min_latitude,\n    min_longitude,\n    max_latitude,\n    max_longitude,\n    city_id,\n    limit\n  }, cursor, (err, docs) => {\n    if (err) {\n      console.log(err);\n      return res.sendStatus(500);\n    }\n\n    res.send(docs);\n  })\n}\n","// @flow\n\nconst db = require('../../db');\nconst ObjectID = require('mongodb').ObjectID;\n\nexports.getPlaces = (userID: string, cb: (any, any) => void ) => {\n  db.get().collection('users').findOne({ userID: userID }, (err, doc) => {\n    if(!!!doc) cb(true, doc);\n    else cb(err, doc);\n  });\n}","module.exports = require(\"body-parser\");","module.exports = require(\"express\");","module.exports = require(\"mongodb\");"],"sourceRoot":""}